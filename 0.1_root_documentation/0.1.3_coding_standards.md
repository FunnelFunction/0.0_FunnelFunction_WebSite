# Coding Standards

> **0.1.3** - Code style and standards for all contributions

---

## General Principles

### Ghost-Less Coding

1. **No orphan files** - Every file has a numbered place in hierarchy
2. **Self-documenting** - Name tells you category, type, and purpose
3. **No magic** - Config files explicit, no hidden behavior
4. **Traceable** - Version numbers create audit trail
5. **Scalable** - Add incrementally without restructuring
6. **Deletable** - Remove a folder, system still works

### KISS (Keep It Simple, Stupid)

- Prefer clarity over cleverness
- One function, one purpose
- Explicit over implicit
- Comments explain WHY, not WHAT

---

## Python Standards

### Style Guide
- Follow **PEP 8**
- Use **type hints** for all functions
- Maximum line length: 88 characters (Black formatter)

### File Structure
```python
"""
6.1.2_implementation.py

Purpose: Implementation of the Master Funnel Function equation
Author: Funnel Function Institute
Created: 2025-12-10
"""

# Standard library imports
import math
from typing import Optional

# Third-party imports
import numpy as np
import torch

# Local imports
from .constants import DECAY_RATE

# Constants
DEFAULT_THRESHOLD = 0.5

# Classes and functions
class FunnelFunction:
    """Implements the core f(x) equation."""

    def __init__(self, threshold: float = DEFAULT_THRESHOLD):
        self.threshold = threshold

    def calculate(self, body: float, mind: float, soul: float) -> float:
        """
        Calculate the funnel function value.

        Args:
            body: Somatic certainty (σ)
            mind: Prediction confidence (π)
            soul: Identity congruence (Ι)

        Returns:
            The computed attention value
        """
        return (body * mind * soul) / self._suppression()
```

### Naming
- Functions: `snake_case`
- Classes: `PascalCase`
- Constants: `UPPER_SNAKE_CASE`
- Private: `_leading_underscore`

---

## JavaScript/TypeScript Standards

### Style Guide
- Use **ESLint** + **Prettier**
- Prefer **TypeScript** over JavaScript
- Use functional components for React

### File Structure
```typescript
/**
 * 5.1.1_src/CampaignCommander.tsx
 *
 * Purpose: Main component for Campaign Commander simulator
 * Author: Funnel Function Institute
 * Created: 2025-12-10
 */

import React, { useState, useCallback } from 'react';
import type { CampaignConfig, SimulationResult } from './types';

// Constants
const DEFAULT_BUDGET = 10000;

// Types
interface Props {
  initialConfig?: CampaignConfig;
  onSimulate: (result: SimulationResult) => void;
}

// Component
export const CampaignCommander: React.FC<Props> = ({
  initialConfig,
  onSimulate
}) => {
  const [budget, setBudget] = useState(initialConfig?.budget ?? DEFAULT_BUDGET);

  const handleSimulation = useCallback(() => {
    // Implementation
  }, [budget]);

  return (
    <div className="campaign-commander">
      {/* JSX */}
    </div>
  );
};
```

### Naming
- Components: `PascalCase`
- Functions/variables: `camelCase`
- Constants: `UPPER_SNAKE_CASE`
- Files: Match export name

---

## CSS Standards

### Methodology: BEM (Block Element Modifier)

```css
/* 7.2.3_components.css */

/* Block */
.campaign-commander {
  display: flex;
  flex-direction: column;
}

/* Element */
.campaign-commander__header {
  padding: 20px;
}

.campaign-commander__slider {
  width: 100%;
}

/* Modifier */
.campaign-commander--dark {
  background: #0a0a0f;
}

.campaign-commander__button--primary {
  background: linear-gradient(135deg, #8b5cf6, #d946ef);
}
```

### Variables (7.2.1_variables.css)
```css
:root {
  /* Colors */
  --color-primary: #8b5cf6;
  --color-secondary: #d946ef;
  --color-accent: #f97316;
  --color-background: #0a0a0f;
  --color-text: #f1f5f9;
  --color-text-muted: #94a3b8;

  /* Typography */
  --font-primary: system-ui, -apple-system, sans-serif;
  --font-mono: 'SF Mono', Monaco, monospace;

  /* Spacing */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 40px;

  /* Borders */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
}
```

---

## Markdown Standards

### File Header
```markdown
# Title

> **[VERSION_NUMBER]** - Brief description

---

## Section
```

### Links
- Use relative paths within repo
- Use full URLs for external links
- Always include link text

### Tables
- Use for structured data
- Align columns for readability
- Include header row

---

## Git Standards

### Commit Messages
```
<type>(<scope>): <subject>

<body>

<footer>
```

**Types:**
- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation
- `style`: Formatting
- `refactor`: Code restructure
- `test`: Adding tests
- `chore`: Maintenance

**Example:**
```
feat(equations): add PyTorch implementation of f(Commitment)

- Implements the commitment function as differentiable PyTorch module
- Adds unit tests for edge cases
- Updates documentation

Closes #42
```

### Branch Naming
```
<type>/<description>

feature/add-campaign-commander-simulator
fix/social-aggregator-rate-limit
docs/update-naming-conventions
```

---

## Documentation Standards

### Every file needs:
1. **Header comment** - Purpose, author, date
2. **Docstrings** - For all public functions/classes
3. **Type hints** - For all parameters and returns
4. **Examples** - For complex functions

### README in every folder:
- What the folder contains
- How files relate to each other
- Links to relevant documentation

---

*Last updated: 2025-12-10*
