# Architecture Overview

> **0.1.1** - System architecture and design decisions

---

## System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              USERS / VISITORS                               │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         funnelfunction.com (WordPress)                      │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│  │    HOME     │  │    ABOUT    │  │   KNOWLEDGE │  │   ARTICLES  │       │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
│  ┌─────────────┐  ┌─────────────┐                                          │
│  │   SOCIAL    │  │  SIMULATORS │ ◄─── Embeds from GitHub Pages           │
│  └─────────────┘  └─────────────┘                                          │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                    ┌─────────────────┼─────────────────┐
                    ▼                 ▼                 ▼
         ┌──────────────────┐ ┌──────────────┐ ┌──────────────────┐
         │  WordPress API   │ │  GitHub API  │ │  Social APIs     │
         │  (Content CRUD)  │ │  (Code/Data) │ │  (Aggregation)   │
         └──────────────────┘ └──────────────┘ └──────────────────┘
                    │                 │                 │
                    └─────────────────┼─────────────────┘
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    THIS REPOSITORY (Source of Truth)                        │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  0.x Root  │  1.x Pages  │  2.x Knowledge  │  3.x Articles         │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  4.x Social  │  5.x Simulators  │  6.x Equations  │  7.x Assets    │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  8.x Scripts  │  9.x Tests                                         │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Design Principles

### 1. Separation of Concerns

| Platform | Responsibility |
|----------|----------------|
| **WordPress** | Content delivery, SEO, analytics, subscriptions |
| **GitHub** | Version control, code, equations, simulators |
| **Social Platforms** | Distribution, engagement, presence |

### 2. Single Source of Truth

- All **content** originates in this repository
- WordPress receives **synced** content
- No manual editing in WordPress (ideal state)

### 3. Ghost-Less Architecture

- Every file has an explicit place
- No orphaned resources
- No hidden dependencies
- Self-documenting structure

### 4. Semantic Versioning

- Folder numbers = categories
- File numbers = order + version
- Names = purpose + function

---

## Data Flow

### Content Creation Flow
```
1. Create/edit in GitHub repo (Markdown)
         │
         ▼
2. Build process generates HTML
         │
         ▼
3. Sync to WordPress via API
         │
         ▼
4. Live on funnelfunction.com
```

### Social Aggregation Flow
```
1. Post to LinkedIn, X, Medium, etc.
         │
         ▼
2. Aggregator script pulls via APIs
         │
         ▼
3. Extract keywords for SEO
         │
         ▼
4. Generate /social/ page content
         │
         ▼
5. Sync to WordPress
```

### Simulator Deployment Flow
```
1. Develop simulator in 5.x folder
         │
         ▼
2. Build React/TypeScript app
         │
         ▼
3. Deploy to GitHub Pages
         │
         ▼
4. Embed in WordPress via iframe/script
```

---

## Technology Stack

| Layer | Technology |
|-------|------------|
| **CMS** | WordPress.com (Business) |
| **Code Hosting** | GitHub |
| **Static Hosting** | GitHub Pages |
| **Equations** | Python, PyTorch |
| **Simulators** | React, TypeScript, Vite |
| **Styling** | CSS (BEM methodology) |
| **Build** | Shell scripts, Python |
| **APIs** | WordPress REST, GitHub, LinkedIn, X |

---

## Security Considerations

- API tokens stored in `.env` (never committed)
- OAuth2 flow for WordPress access
- Personal Access Tokens for GitHub
- Rate limiting respected on all APIs

---

*Last updated: 2025-12-10*
